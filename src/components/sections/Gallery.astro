---
import { getModuleDataBySlug } from "../../data/cms";
import GalleryGrid from "../GalleryGrid";

let galleryItems: any[] = [];
let error: string | null = null;

try {
  galleryItems = getModuleDataBySlug("gallery");
} catch (err) {
  console.error("Failed to fetch gallery data:", err);
  error = err instanceof Error ? err.message : "Failed to load gallery";
}
---

<div class="container mx-auto px-4 py-8 md:py-16">
  {
    error ? (
      <div class="text-center py-12 text-foreground-muted">
        <p class="text-lg">⚠️ {error}</p>
      </div>
    ) : galleryItems.length === 0 ? null : (
      <GalleryGrid client:load items={galleryItems} />
    )
  }
</div>
